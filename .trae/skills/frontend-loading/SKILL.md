---
name: "frontend-loading"
description: "前端加载状态处理规范，包含数据可用性判断、骨架屏加载和调试信息展示。Invoke when implementing loading states in Vue components."
---

# 前端加载状态处理规范

## 加载处理模式

严格按照以下模式处理加载状态，**不要优先判断加载状态**，不要使用 `!loading` 这样的判断。

### 模板结构

```vue
<template>
  <!-- 1. 数据可用时（无论是否正在加载），显示数据 -->
  <div v-if="nullableData">
    <!-- 展示实际数据内容 -->
    {{ nullableData.field }}
  </div>

  <!-- 2. 加载时，展示骨架加载动画 -->
  <div v-else-if="loading">
    <!-- 骨架屏加载动画 -->
  </div>

  <!-- 3. 数据不可用是合法情况　-->
  <!-- 不使用 v-else 显示任何元素或展示提示信息，-->

  <!-- 4. 其他情况，用 font-mono 展示相关参数对象本身，方便调试 -->
  <div v-else class="font-mono">
    {{ props }}
  </div>
</template>
```

### 关键原则

1. **数据优先判断**：首先检查数据是否可用，而不是检查是否正在加载
2. **骨架屏加载**：使用骨架屏动画代替文本变化来展示加载状态
3. **调试信息**：在异常情况下，直接展示相关参数对象，使用 `font-mono` 样式

### 避免的做法

❌ **不要**通过文本变化来体现加载状态（会导致界面抖动）
❌ **不要**优先判断 `!loading`
❌ **不要**在加载时显示占位文本（如 "加载中..."）

### 推荐的做法

✅ 使用骨架屏加载动画
✅ 通过样式/图标变化来展示加载状态
✅ 数据可用时立即展示，即使后台仍在加载更多数据
✅ 调试时直接展示参数对象，使用 `font-mono` 样式

## 使用场景

- 列表数据加载
- 详情页数据获取
- 异步表单数据加载
- 任何需要展示加载状态的组件

## 注意事项

- 骨架屏应该尽可能模拟实际内容的布局
- 调试信息只在开发环境或异常情况下展示
- 加载状态应该平滑过渡，避免界面抖动
- 不要在 v-if 下面对已经检查过的数据使用 nullish 连接符
